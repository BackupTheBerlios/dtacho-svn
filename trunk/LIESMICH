
dtacho Projekt
==============


INFO
----

Dieses Projekt hat das Ziel, eine plattformunabhängige Open Source Software
zu erstellen, die Daten von Fahrerkarten und Fahrzeugeinheiten eines Digitalen
Tachographen (DTCO) nach XML konvertiert. Eine Anwendung zur Untersuchung und
zur Visualisierung der Daten soll ebenfalls entwickelt werden.

Webseite                  : http://www.digitaler-tachograph.org/
Projekt-/Entwicklungsseite: http://developer.berlios.de/projects/dtacho/

Es exisitieren Mailinglisten für Benutzer und Entwickler dieses Projekts. Für
Details besuchen Sie unsere Webseite oder die Projektseite auf Berlios.

Für Informationen/Spezifikationen zum DTCO siehe unten im Kapitel
SPEZIFIKATIONEN.


LIZENZ
------

dtacho wird unter der GNU GENERAL PUBLIC LICENSE Version 2 veröffentlicht.




FORMATWANDLER
==============

STATUS
------

Der Formwatwandler von Byte-Daten nach XML ist in Java geschrieben. Der Status von
dtacho ist alpha. Es kann passieren, dass die Software nicht unter allen
Bedingungen funktioniert und dass falsche oder unerwartete Ergebnisse auftreten.

13.04.2008
Diese Software konvertiert die Daten von .DDD-Dateien (C_*.DDD), die von
DTCO-Fahrerkarten stammen, sowie die Daten von .DDD-Dateien (M_*.DDD), die
von Fahrzeugeinheiten stammen, zu XML-Dateien.

Die ausgegebenen XML-Dateien lassen sich mit XML Schema Definitionen (XSD)
validieren.

Der Code zum Konvertieren von Kartendaten wurde von Martin Barth in seiner
Diplomarbeit entwickelt und wurde von Gerald Schnabel erweitert, um auch die
Daten von Fahrzeugeinheiten umzuwandeln.


BEMERKUNGEN
-----------

Diese Software hängt von einigen zusätzlichen Komponenten (jars) ab, welche im
Verzeichnis classes abgelegt sind.

Die jars wurden von folgenden Quellen bezogen:

* xmlrpc

  URL: http://ws.apache.org/xmlrpc/
  Datei: xmlrpc-3.1-bin.tar.gz
  JARS:
  -xmlrpc-common-3.1.jar
  -xmlrpc-client-3.1.jar
  -xmlrpc-server-3.1.jar
  -commons-logging-1.1.jar
  -ws-commons-util-1.0.2.jar

* jdom

  URL: http://www.jdom.org/
  Datei: jdom-1.1.tar.gz
  JARS:
  -jdom-1.1.jar


STARTEN DES PROGRAMMS
---------------------

Es gibt zwei Möglichkeiten, eine lauffähige Version des Programms zu
erhalten.

1. Einen Code-Snapshot herunterladen

Code-Snapshots (JAR archives) sind unter http://dtacho.berlios.de/jar/
verfügbar.

Um das Programm zu starten wird ein aktuelles Java Runtime Environment (JRE)
6 benötigt.

Die Syntax von der Kommandozeile aus ist
java -jar dtacho-yyyymmdd.jar <drivercardfile.DDD>

Um die Datenintergrität der Dateien von Fahrerkarten überprüfen zu können
muss der europäische öffentliche Schlüssel im aktuellen Verzeichnis
vorhanden sein, oder die Umgebungsvariable EURPKPATH muss den Pfad enthalten,
unter dem der Schlüssel gefunden werden kann.

Siehe Kapitel DER EUROPÄISCHE ÖFFENTLICHE SCHLÜSSEL.


Beispiele:

 gerald@dtachodev:~/workspace/dtacho/bin$ java -jar dtacho-20080122.jar \
 C_driver_card.DDD

 Es wird die Datei C_driver_card.DDD einer Fahrerkarte gelesen, einige
 (Debug-) Informationen ausgegeben und die Datei C_driver_card.DDD.xml
 erstellt.


 Mehrere Dateien/Wildcards werden über die Kommandozeile unterstützt, z.B.

 gerald@dtachodev:~/workspace/dtacho/bin$ java -jar dtacho-20080122.jar \
 C_*.DDD

 konvertiert alle Dateien von Fahrerkarten (C_*.DDD) im aktuellen Verzeichnis
 zu XML-Dateien.


2. Den aktuellen Quellcode aus dem SVN-Repository compilieren

-Den Quellcode beziehen

 Der Quellcode kann von Berlios.de via SVN ausgecheckt werden.

 gerald@dtachodev:/tmp/dtacho_test$ svn checkout svn://svn.berlios.de/dtacho/trunk


-Den Quellcode compilieren

 Um den Quellcode zu compilieren, muss das Java Development Kit (JDK) installiert
 sein. Bitte ein aktuelles JDK 6 verwenden. Entwickelt wird mit Version 6.0u5.
 Siehe http://java.sun.com/javase/downloads/index.jsp für weiteres.

 -in das Verzeichnis trunk/src wechseln

  gerald@dtachodev:/tmp/dtacho_test$ cd trunk/src

 -den Java-Compiler aufrufen:

  gerald@dtachodev:/tmp/dtacho_test/trunk/src$ javac -cp ".:../classes/*" org/digitalertachograph/DDDQuery/*.java


-Starten des Programms

 Die möglichen Umgebungsvariablen stehen im Kapitel UMGEBUNGSVARIABLEN.

 Wenn der Quellcode wie oben beschrieben compiliert wurde, befindet man sich
 schon im richtigen Verzeichnis.

 Wenn der Quellcode mit Eclipse compiliert wurde, in das Verzeichnis bin wechseln.

 'ls -lR | grep ^d' sollte die folgende Ausgabe liefern:

 gerald@dtachodev:~/workspace/dtacho/bin$ ls -lR | grep ^d
 drwxr-xr-x 3 gerald gerald 4096 2007-12-02 20:49 org
 drwxr-xr-x 3 gerald gerald 4096 2007-12-02 20:49 digitalertachograph
 drwxr-xr-x 3 gerald gerald 4096 2007-12-02 20:49 DDDQuery
 drwxr-xr-x 3 gerald gerald 4096 2007-12-02 20:49 internalData
 drwxr-xr-x 2 gerald gerald 4096 2007-12-02 20:49 DataTypes

 Um den Formatwandler zu starten müssen
 -das aktuelle Verzeichnis
 -das Verzeichnis, dass die zusätzlichen jar-Dateien (siehe Kapitel BEMERKUNGEN
  oben), enthält,
 zum Java-Klassenpfad hinzugefügt werden.

 Dies erfolgt mit der Option -cp.

 Um die Datenintergrität von Dateien von Fahrerkarten überprüfen zu können
 muss der europäische öffentliche Schlüssel im aktuellen Verzeichnis
 vorhanden sein, oder die Umgebunsvariable muss den Pfad enthalten, unter
 dem der Schlüssel gefunden werden kann.

 Siehe Kapitel DER EUROPÄISCHE ÖFFENTLICHE SCHLÜSSEL.


 Beispiele:

 gerald@dtachdev:~/workspace/dtacho/bin$ java -cp ".:../classes/*" \
 org.digitalertachograph.DDDQuery.Controller C_driver_card.DDD

 Es wird die Datei C_driver_card.DDD einer Fahrerkarte gelesen, einige
 (Debug-) Informationen ausgegeben und die Datei C_driver_card.DDD.xml
 erstellt.


 Mehrere Dateien/Wildcards werden über die Kommandozeile unterstützt, z.B.

 gerald@dtachdev:~/workspace/dtacho/bin$ java -cp ".:../classes/*" \
 org.digitalertachograph.DDDQuery.Controller C_*.DDD

 konvertiert alle Dateien von Fahrerkarten (C_*.DDD) im aktuellen Verzeichnis
 zu XML-Dateien.


UMGEBUNGSVARIABLEN
------------------

-DEBUGLOGLEVEL:
 Die Stufe für Debugmeldungen.
 Standard ist ERROR.
 Folgende Stufen, von der niedrigsten bis zur höchsten, sind möglich:
 NOTHING >> ERROR >> INFO >> INFO_EXTENDED >> ALL

 NOTHING: keine Debugmeldungen
 ERROR: nur Meldungen ausgeben, wenn ein Fehler aufgetreten ist
 INFO: Info-Meldungen ausgeben
 INFO_EXTENDED: erweiterte Info-Meldungen ausgeben
 ALL: alle Meldungen ausgeben

 Eine gewählte Stufe schließt alle Stufen darunter mit ein!

-DEBUGPRINTSTREAM:
 Stream, an den Debugmeldungen ausgegeben werden.
 Standard ist die Standardausgabe (System.out, stdout).
 Ansonsten werden die Debugmeldungen an die über diese Umgebungsvariable
 angegebene Datei angehängt. Das Anhängen an die Datei lässt sich über
 DEBUGPRINTSTREAMAPPEND=false abschalten.

-EURPKPATH:
 Pfad zum europäischen öffentlichen Schlüssel, siehe Kapitel
 DER EUROPÄISCHE ÖFFENTLICHE SCHLÜSSEL.


DER EUROPÄISCHE ÖFFENTLICHE SCHLÜSSEL
-------------------------------------

Der europäische öffentliche Schlüssel ist auf der Web-Site der European
Root Certification Authority (ERCA) unter http://dtc.jrc.it/text/erca.html
erhältlich.

Der Byte-Daten nach XML Konvertierer benötigt die Datei EC_PK.bin aus dem
Archiv EC_PK.zip.

Der Konvertierer lädt die Datei EC_PK.bin aus dem Pfad, der in der Umgebungs-
variable EURPKPATH gesetzt ist (oder aus dem aktuellen Verzeichnis, wenn
EURPKPATH nicht gesetzt ist).


SPEZIFIKATIONEN
---------------

Die Spezifikation des Digitalen Tachographen (DTCO) ist auf dem Portal der
Europäischen Union unter http://www.europa.eu erhältlich.

Die folgenden Verordnungen (erhältlich in verschiedenen Sprachen) sind für
dieses Projekt von besonderem Interesse:

-Verordnung (EG) Nr. 1360/2002 der Kommission vom 13. Juni 2002 zur siebten
 Anpassung der Verordnung (EWG) Nr. 3821/85 des Rates über das Kontrollgerät
 im Straßenverkehr an den technischen Fortschritt

 http://eur-lex.europa.eu/LexUriServ/LexUriServ.do?uri=CELEX:32002R1360:DE:NOT

-Verordnung (EG) Nr. 432/2004 der Kommission vom 5. März 2004 zur achten
 Anpassung der Verordnung (EWG) Nr. 3821/85 des Rates über das Kontrollgerät
 im Straßenverkehr an den technischen Fortschritt

 http://eur-lex.europa.eu/LexUriServ/LexUriServ.do?uri=CELEX:32004R0432:DE:NOT

-Konsolidierte Fassungen der Verordnung (EWG) Nr. 3821/85

 http://eur-lex.europa.eu/Result.do?direct=yes&lang=de&xsl=lex04_consleg_page&consleg=01985R3821&suffixewhereihm=ID_CELEX:01985R3821

-Informationen zur ASN.1 (Abstract Syntax Notation One), die in den Verordnungen
 verwendet wird:

 -ASN.1 Consortium
  http://www.asn1.org/

 -Bücher/Referenzen
  http://www.asn1.org/books/


LINKS
-----

-European Root Certification Authority (ERCA)
 http://dtc.jrc.it/text/erca.html
